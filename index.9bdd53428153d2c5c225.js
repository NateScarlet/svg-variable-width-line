!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"translatePoint",function(){return a}),n.d(r,"refineFloat",function(){return u});var i={};n.r(i),n.d(i,"length",function(){return s});var o={};function a(t,e){var n=t.getScreenCTM();if(!n)throw new Error("Should has screen CTM.");var r=t.createSVGPoint();return r.x=e.x,r.y=e.y,r.matrixTransform(n.inverse())}function u(t){return t+8-8}function s(){for(var t=0,e=1;e<arguments.length;e+=1){var n=e-1<0||arguments.length<=e-1?void 0:arguments[e-1],r=e<0||arguments.length<=e?void 0:arguments[e];t+=Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))}return t}function c(t,e){var n=t.w/2;if(!e)return{left:{x:t.x,y:t.y+n},right:{x:t.x,y:t.y-n}};var r=Math.atan((t.y-e.y)/(t.x-e.x)),i=u(Math.sin(r)*n),o=u(Math.cos(r)*n);return{left:{x:t.x-i,y:t.y+o},right:{x:t.x+i,y:t.y-o}}}function l(){for(var t=["M"],e=[],n=0;n<arguments.length;n+=1){var r=c(n<0||arguments.length<=n?void 0:arguments[n],(n-1<0||arguments.length<=n-1?void 0:arguments[n-1])||(n+1<0||arguments.length<=n+1?void 0:arguments[n+1])),i=r.left,o=r.right,a=e.slice(n)[0];a&&s(a,i)>s(a,o)?e.splice(n,0,i,o):e.splice(n,0,o,i)}for(var u=0,l=e;u<l.length;u++){var f=l[u];t.push("".concat(f.x,",").concat(f.y))}return{d:t.join(" ")}}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(){var t,e=[];if(0===arguments.length)return[];e.push(p({},arguments.length<=0?void 0:arguments[0]));for(var n=0;n<arguments.length-1;n++){var r=n<0||arguments.length<=n?void 0:arguments[n],i=n+1<0||arguments.length<=n+1?void 0:arguments[n+1];e.push({x:.75*r.x+.25*i.x,y:.75*r.y+.25*i.y,w:.75*r.w+.25*i.w},{x:.25*r.x+.75*i.x,y:.25*r.y+.75*i.y,w:.25*r.w+.75*i.w})}arguments.length>2&&e.push(p({},(t=arguments.length-1)<0||arguments.length<=t?void 0:arguments[t]));return e}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t,r=0;r<e;r+=1)n=d.apply(void 0,f(n));return n}function g(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(o),n.d(o,"util",function(){return r}),n.d(o,"vector2",function(){return i}),n.d(o,"computeSidePoints",function(){return c}),n.d(o,"compute",function(){return l}),n.d(o,"smoothOnce",function(){return d}),n.d(o,"smooth",function(){return y});var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isDrawing=!1,this.points=[],this.width=20,this.el=e}var e,n,a;return e=t,(n=[{key:"onPointerdown",value:function(t){t.preventDefault(),this.isDrawing=!0,this.points=[];var e=document.createElementNS("http://www.w3.org/2000/svg","path");this.el.appendChild(e),this.target=e}},{key:"onPointermove",value:function(t){if(this.isDrawing&&(t.preventDefault(),!(this.lastDrawTime&&Date.now()-this.lastDrawTime<4))){this.lastDrawTime=Date.now();var e=r.translatePoint(this.el,t),n={x:e.x,y:e.y,w:t.pressure*this.width},o=this.points.slice(-1)[0];o&&i.length(o,n)<this.width||(this.points.push(n),this.update())}}},{key:"onPointerup",value:function(t){t.preventDefault(),this.isDrawing=!1,delete this.target}},{key:"install",value:function(){this.el.addEventListener("pointerdown",this.onPointerdown.bind(this)),this.el.addEventListener("pointermove",this.onPointermove.bind(this)),this.el.addEventListener("pointerup",this.onPointerup.bind(this))}},{key:"update",value:function(){var t=l.apply(o,g(y(this.points,4))).d;this.mustTarget.setAttribute("d",t)}},{key:"mustTarget",get:function(){if(!this.target)throw new Error("Should has target");return this.target}}])&&w(e.prototype,n),a&&w(e,a),t}();!function(){var t=document.querySelector("svg#canvas");if(!(t instanceof SVGSVGElement))throw Error("Missing canvas element");new b(t).install(),t.addEventListener("pointermove",function(t){var e=document.querySelector("#pressure");e&&(e.textContent=t.pressure.toString())})}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL3RyYW5zbGF0ZVBvaW50LnRzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9yZWZpbmVGbG9hdC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmVjdG9yMi9sZW5ndGgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXB1dGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Ntb290aC50cyIsIndlYnBhY2s6Ly8vLi9kZW1vL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidHJhbnNsYXRlUG9pbnQiLCJlbCIsInBvaW50IiwibWF0cml4IiwiZ2V0U2NyZWVuQ1RNIiwiRXJyb3IiLCJjcmVhdGVTVkdQb2ludCIsIngiLCJ5IiwibWF0cml4VHJhbnNmb3JtIiwiaW52ZXJzZSIsInJlZmluZUZsb2F0IiwidiIsInJldCIsImxlbmd0aCIsInBhIiwicGIiLCJNYXRoIiwic3FydCIsInBvdyIsImNvbXB1dGVTaWRlUG9pbnRzIiwiY3VycmVudCIsInByZXYiLCJ3IiwibGVmdCIsInJpZ2h0IiwiYW5nbGUiLCJhdGFuIiwiZHgiLCJzaW4iLCJkeSIsImNvcyIsImNvbXB1dGUiLCJvcGVyYXRpb25zIiwiZWRnZVBvaW50cyIsImxhc3RMZWZ0Iiwic2xpY2UiLCJzcGxpY2UiLCJwdXNoIiwiam9pbiIsInNtb290aE9uY2UiLCJwMCIsInAxIiwic21vb3RoIiwicG9pbnRzIiwidGltZXMiLCJjb3VudCIsImlzRHJhd2luZyIsIndpZHRoIiwidGhpcyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInRhcmdldCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiYXBwZW5kQ2hpbGQiLCJsYXN0RHJhd1RpbWUiLCJEYXRlIiwibm93IiwicHJlc3N1cmUiLCJsYXN0UG9pbnQiLCJ1cGRhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwib25Qb2ludGVyZG93biIsIm9uUG9pbnRlcm1vdmUiLCJvblBvaW50ZXJ1cCIsIm11c3RUYXJnZXQiLCJzZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwiU1ZHU1ZHRWxlbWVudCIsImluc3RhbGwiLCJ0ZXh0Q29udGVudCIsInRvU3RyaW5nIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FHL0RHLEVBQU9FLEdBQUksRUFHSkYsRUFBT0QsUUFLZkYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIs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QUFPTixLQUFLeEMsR0FDakJtRCxLQUFLWSxhLGtDQUVLWCxHQUNWQSxFQUFFQyxpQkFDRkYsS0FBS0YsV0FBWSxTQUNWRSxLQUFLRyxTLGdDQUdaSCxLQUFLaEQsR0FBRzZELGlCQUFpQixjQUFlYixLQUFLYyxjQUFjdkUsS0FBS3lELE9BQ2hFQSxLQUFLaEQsR0FBRzZELGlCQUFpQixjQUFlYixLQUFLZSxjQUFjeEUsS0FBS3lELE9BQ2hFQSxLQUFLaEQsR0FBRzZELGlCQUFpQixZQUFhYixLQUFLZ0IsWUFBWXpFLEtBQUt5RCxTLCtCQUV4RCxJQUNJM0UsRUFBTSxVQUFvQixFQUM3QixFQUE0QjJFLEtBQUtMLE9BQVEsS0FEdEN0RSxFQUdSMkUsS0FBS2lCLFdBQVdDLGFBQWEsSUFBSzdGLEssaUNBekNsQyxJQUFLMkUsS0FBS0csT0FDUixNQUFNLElBQUkvQyxNQUFNLHFCQUVsQixPQUFPNEMsS0FBS0csWSxpQ0EwQ2hCLFdBQ0UsSUFBTW5ELEVBQUtvRCxTQUFTZSxjQUFjLGNBQ2xDLEtBQU1uRSxhQUFjb0UsZUFDbEIsTUFBTWhFLE1BQU0sMEJBRWQsSUFBSSxFQUFlSixHQUFJcUUsVUFDdkJyRSxFQUFHNkQsaUJBQWlCLGNBQWUsU0FBQVosR0FDakMsSUFBTWpELEVBQUtvRCxTQUFTZSxjQUFjLGFBQzdCbkUsSUFHTEEsRUFBR3NFLFlBQWNyQixFQUFFUyxTQUFTYSxjQVhoQyIsImZpbGUiOiJpbmRleC45YmRkNTM0MjgxNTNkMmM1YzIyNS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGVQb2ludChcbiAgZWw6IFNWR1NWR0VsZW1lbnQsXG4gIHBvaW50OiB7IHg6IG51bWJlcjsgeTogbnVtYmVyIH1cbik6IERPTVBvaW50IHtcbiAgY29uc3QgbWF0cml4ID0gZWwuZ2V0U2NyZWVuQ1RNKCk7XG5cbiAgaWYgKCFtYXRyaXgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBoYXMgc2NyZWVuIENUTS4nKTtcbiAgfVxuICBjb25zdCBwID0gZWwuY3JlYXRlU1ZHUG9pbnQoKTtcbiAgcC54ID0gcG9pbnQueDtcbiAgcC55ID0gcG9pbnQueTtcbiAgcmV0dXJuIHAubWF0cml4VHJhbnNmb3JtKG1hdHJpeC5pbnZlcnNlKCkpO1xufVxuIiwiLyoqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80MzU1MDI2OCAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZmluZUZsb2F0KHY6IG51bWJlcik6IG51bWJlciB7XG4gIHJldHVybiB2ICsgOCAtIDg7XG59XG4iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSAnQC90eXBlcyc7XG5cbi8qKiBMZW5ndGggYmV0d2VlbiBwb2ludHMgKi9cbmV4cG9ydCBmdW5jdGlvbiBsZW5ndGgoLi4ucG9pbnRzOiBWZWN0b3IyW10pOiBudW1iZXIge1xuICBsZXQgcmV0ID0gMDtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBwYSA9IHBvaW50c1tpIC0gMV07XG4gICAgY29uc3QgcGIgPSBwb2ludHNbaV07XG4gICAgcmV0ICs9IE1hdGguc3FydChNYXRoLnBvdyhwYS54IC0gcGIueCwgMikgKyBNYXRoLnBvdyhwYS55IC0gcGIueSwgMikpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG4iLCJpbXBvcnQgeyBQb2ludCwgVmVjdG9yMiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgcmVmaW5lRmxvYXQgfSBmcm9tICcuL3V0aWxzL3JlZmluZUZsb2F0JztcbmltcG9ydCAqIGFzIHZlY3RvcjIgZnJvbSAnLi92ZWN0b3IyJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVTaWRlUG9pbnRzKFxuICBjdXJyZW50OiBQb2ludCxcbiAgcHJldj86IFBvaW50XG4pOiB7IGxlZnQ6IFZlY3RvcjI7IHJpZ2h0OiBWZWN0b3IyIH0ge1xuICBjb25zdCByID0gY3VycmVudC53IC8gMjtcbiAgaWYgKCFwcmV2KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IHtcbiAgICAgICAgeDogY3VycmVudC54LFxuICAgICAgICB5OiBjdXJyZW50LnkgKyByLFxuICAgICAgfSxcbiAgICAgIHJpZ2h0OiB7XG4gICAgICAgIHg6IGN1cnJlbnQueCxcbiAgICAgICAgeTogY3VycmVudC55IC0gcixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbigoY3VycmVudC55IC0gcHJldi55KSAvIChjdXJyZW50LnggLSBwcmV2LngpKTtcbiAgY29uc3QgZHggPSByZWZpbmVGbG9hdChNYXRoLnNpbihhbmdsZSkgKiByKTtcbiAgY29uc3QgZHkgPSByZWZpbmVGbG9hdChNYXRoLmNvcyhhbmdsZSkgKiByKTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiB7XG4gICAgICB4OiBjdXJyZW50LnggLSBkeCxcbiAgICAgIHk6IGN1cnJlbnQueSArIGR5LFxuICAgIH0sXG4gICAgcmlnaHQ6IHtcbiAgICAgIHg6IGN1cnJlbnQueCArIGR4LFxuICAgICAgeTogY3VycmVudC55IC0gZHksXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGUoLi4ucG9pbnRzOiBQb2ludFtdKTogeyBkOiBzdHJpbmcgfSB7XG4gIGNvbnN0IG9wZXJhdGlvbnM6IHN0cmluZ1tdID0gWydNJ107XG4gIGNvbnN0IGVkZ2VQb2ludHM6IFZlY3RvcjJbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgIGNvbnN0IHsgbGVmdCwgcmlnaHQgfSA9IGNvbXB1dGVTaWRlUG9pbnRzKFxuICAgICAgcG9pbnRzW2ldLFxuICAgICAgcG9pbnRzW2kgLSAxXSB8fCBwb2ludHNbaSArIDFdXG4gICAgKTtcbiAgICBjb25zdCBsYXN0TGVmdCA9IGVkZ2VQb2ludHMuc2xpY2UoaSlbMF07XG4gICAgaWYgKFxuICAgICAgbGFzdExlZnQgJiZcbiAgICAgIHZlY3RvcjIubGVuZ3RoKGxhc3RMZWZ0LCBsZWZ0KSA+IHZlY3RvcjIubGVuZ3RoKGxhc3RMZWZ0LCByaWdodClcbiAgICApIHtcbiAgICAgIGVkZ2VQb2ludHMuc3BsaWNlKGksIDAsIGxlZnQsIHJpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWRnZVBvaW50cy5zcGxpY2UoaSwgMCwgcmlnaHQsIGxlZnQpO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IHAgb2YgZWRnZVBvaW50cykge1xuICAgIG9wZXJhdGlvbnMucHVzaChgJHtwLnh9LCR7cC55fWApO1xuICB9XG4gIGNvbnN0IGQgPSBvcGVyYXRpb25zLmpvaW4oJyAnKTtcbiAgcmV0dXJuIHsgZCB9O1xufVxuIiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuL3R5cGVzJztcblxuLy8gUmVmZXI6IGh0dHBzOi8vZ2l0aHViLmNvbS9KYW0zL2NoYWlraW4tc21vb3RoL2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5cbmV4cG9ydCBmdW5jdGlvbiBzbW9vdGhPbmNlKC4uLnBvaW50czogUG9pbnRbXSk6IFBvaW50W10ge1xuICBjb25zdCByZXQ6IFBvaW50W10gPSBbXTtcbiAgaWYgKHBvaW50cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgcmV0LnB1c2goeyAuLi5wb2ludHNbMF0gfSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IHAwID0gcG9pbnRzW2ldO1xuICAgIGNvbnN0IHAxID0gcG9pbnRzW2kgKyAxXTtcblxuICAgIHJldC5wdXNoKFxuICAgICAge1xuICAgICAgICB4OiAwLjc1ICogcDAueCArIDAuMjUgKiBwMS54LFxuICAgICAgICB5OiAwLjc1ICogcDAueSArIDAuMjUgKiBwMS55LFxuICAgICAgICB3OiBwMC53ICogMC43NSArIHAxLncgKiAwLjI1LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgeDogMC4yNSAqIHAwLnggKyAwLjc1ICogcDEueCxcbiAgICAgICAgeTogMC4yNSAqIHAwLnkgKyAwLjc1ICogcDEueSxcbiAgICAgICAgdzogcDAudyAqIDAuMjUgKyBwMS53ICogMC43NSxcbiAgICAgIH1cbiAgICApO1xuICB9XG4gIGlmIChwb2ludHMubGVuZ3RoID4gMikge1xuICAgIHJldC5wdXNoKHsgLi4ucG9pbnRzW3BvaW50cy5sZW5ndGggLSAxXSB9KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc21vb3RoKHBvaW50czogUG9pbnRbXSwgdGltZXMgPSAxKTogUG9pbnRbXSB7XG4gIGxldCByZXQgPSBwb2ludHM7XG4gIGZvciAobGV0IGNvdW50ID0gMDsgY291bnQgPCB0aW1lczsgY291bnQgKz0gMSkge1xuICAgIHJldCA9IHNtb290aE9uY2UoLi4ucmV0KTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuIiwiaW1wb3J0ICogYXMgc3ZnVmFyaWFibGVXaWR0aExpbmUgZnJvbSAnQCc7XG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJ0AnO1xuXG5jbGFzcyBEcmF3aW5nSGFuZGxlciB7XG4gIHB1YmxpYyBlbDogU1ZHU1ZHRWxlbWVudDtcbiAgcHVibGljIGlzRHJhd2luZyA9IGZhbHNlO1xuICBwdWJsaWMgcG9pbnRzOiBzdmdWYXJpYWJsZVdpZHRoTGluZS5Qb2ludFtdID0gW107XG4gIHB1YmxpYyB0YXJnZXQ/OiBTVkdQYXRoRWxlbWVudDtcbiAgcHVibGljIHdpZHRoID0gMjA7XG4gIHB1YmxpYyBsYXN0RHJhd1RpbWU/OiBudW1iZXI7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKGVsOiBTVkdTVkdFbGVtZW50KSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICB9XG4gIG9uUG9pbnRlcmRvd24oZTogUG9pbnRlckV2ZW50KTogdm9pZCB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuaXNEcmF3aW5nID0gdHJ1ZTtcbiAgICB0aGlzLnBvaW50cyA9IFtdO1xuICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcbiAgICAgICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsXG4gICAgICAncGF0aCdcbiAgICApO1xuICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQodGFyZ2V0KTtcbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgfVxuICBnZXQgbXVzdFRhcmdldCgpOiBTVkdQYXRoRWxlbWVudCB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaG91bGQgaGFzIHRhcmdldCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50YXJnZXQ7XG4gIH1cbiAgb25Qb2ludGVybW92ZShlOiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNEcmF3aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAodGhpcy5sYXN0RHJhd1RpbWUgJiYgRGF0ZS5ub3coKSAtIHRoaXMubGFzdERyYXdUaW1lIDwgNCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3REcmF3VGltZSA9IERhdGUubm93KCk7XG4gICAgY29uc3QgeyB4LCB5IH0gPSBzdmdWYXJpYWJsZVdpZHRoTGluZS51dGlsLnRyYW5zbGF0ZVBvaW50KHRoaXMuZWwsIGUpO1xuICAgIGNvbnN0IHcgPSBlLnByZXNzdXJlICogdGhpcy53aWR0aDtcbiAgICBjb25zdCBwOiBQb2ludCA9IHsgeCwgeSwgdyB9O1xuICAgIGNvbnN0IGxhc3RQb2ludCA9IHRoaXMucG9pbnRzLnNsaWNlKC0xKVswXTtcbiAgICBpZiAoXG4gICAgICBsYXN0UG9pbnQgJiZcbiAgICAgIHN2Z1ZhcmlhYmxlV2lkdGhMaW5lLnZlY3RvcjIubGVuZ3RoKGxhc3RQb2ludCwgcCkgPCB0aGlzLndpZHRoXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucG9pbnRzLnB1c2gocCk7XG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuICBvblBvaW50ZXJ1cChlOiBQb2ludGVyRXZlbnQpOiB2b2lkIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5pc0RyYXdpbmcgPSBmYWxzZTtcbiAgICBkZWxldGUgdGhpcy50YXJnZXQ7XG4gIH1cbiAgaW5zdGFsbCgpOiB2b2lkIHtcbiAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJkb3duJywgdGhpcy5vblBvaW50ZXJkb3duLmJpbmQodGhpcykpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCB0aGlzLm9uUG9pbnRlcm1vdmUuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCB0aGlzLm9uUG9pbnRlcnVwLmJpbmQodGhpcykpO1xuICB9XG4gIHVwZGF0ZSgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGQgfSA9IHN2Z1ZhcmlhYmxlV2lkdGhMaW5lLmNvbXB1dGUoXG4gICAgICAuLi5zdmdWYXJpYWJsZVdpZHRoTGluZS5zbW9vdGgodGhpcy5wb2ludHMsIDQpXG4gICAgKTtcbiAgICB0aGlzLm11c3RUYXJnZXQuc2V0QXR0cmlidXRlKCdkJywgZCk7XG4gIH1cbn1cblxuKCgpOiB2b2lkID0+IHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzdmcjY2FudmFzJyk7XG4gIGlmICghKGVsIGluc3RhbmNlb2YgU1ZHU1ZHRWxlbWVudCkpIHtcbiAgICB0aHJvdyBFcnJvcignTWlzc2luZyBjYW52YXMgZWxlbWVudCcpO1xuICB9XG4gIG5ldyBEcmF3aW5nSGFuZGxlcihlbCkuaW5zdGFsbCgpO1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIGUgPT4ge1xuICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByZXNzdXJlJyk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbC50ZXh0Q29udGVudCA9IGUucHJlc3N1cmUudG9TdHJpbmcoKTtcbiAgfSk7XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==